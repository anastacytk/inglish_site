<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inglish - Тренажёр для подготовки к ОГЭ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #fff5e6 0%, #ffe5e5 50%, #fff0e6 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }


        header {
            padding: 20px 40px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #d63384;
            letter-spacing: 2px;
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-link {
            color: #d63384;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s;
            cursor: pointer;
        }

        .nav-link:hover {
            opacity: 0.7;
        }


        .banner {
            max-width: 1200px;
            margin: 60px auto;
            padding: 40px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
            background: linear-gradient(135deg, #F6D6CD 0%, #FFBF58 100%);
            border-radius: 30px;
        }

        .banner-content h1 {
            font-size: 42px;
            color: #d63384;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .banner-illustration {
            text-align: center;
        }

        .banner-illustration img {
            max-width: 100%;
            height: auto;
            max-height: 200px;
        }


        .section {
            max-width: 1200px;
            margin: 60px auto;
            padding: 0 40px;
        }

        .section-title {
            font-size: 32px;
            color: #d63384;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .section-text {
            font-size: 18px;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.8;
        }


        .convenience-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 30px;
        }

        .convenience-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .convenience-box {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .convenience-box img {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
        }

        .box-1 {
            background: linear-gradient(135deg, #ffd6e8 0%, #ffc0d9 100%);
        }

        .box-2 {
            background: linear-gradient(135deg, #ffe5cc 0%, #ffd9b3 100%);
        }

        .box-3 {
            background: linear-gradient(135deg, #ffd9b3 0%, #ffcc99 100%);
        }

        .convenience-text {
            font-size: 16px;
            font-weight: 500;
            color: #333;
            text-align: center;
        }


        .training-cards {
            display: grid;
            gap: 30px;
            margin-top: 30px;
        }

        .training-card {
            background: linear-gradient(135deg, #ffe5e5 0%, #ffd6e8 100%);
            border-radius: 20px;
            padding: 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.3s;
        }

        .training-card:hover {
            transform: translateY(-5px);
        }

        .card-content h3 {
            font-size: 28px;
            color: #d63384;
            margin-bottom: 15px;
        }

        .card-content p {
            font-size: 18px;
            color: #333;
        }

        .btn {
            padding: 15px 40px;
            font-size: 18px;
            font-weight: bold;
            color: #d63384;
            background: white;
            border: 3px solid #d63384;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            background: #d63384;
            color: white;
            transform: scale(1.05);
        }

        .btn:active {
            transform: scale(0.98);
        }



        .page {
            display: none;
            min-height: 100vh;
            padding: 40px 20px;
            background: linear-gradient(135deg, #fff5e6 0%, #ffe5e5 50%, #fff0e6 100%);
        }

        .page.active {
            display: block;
        }

        .main-page {
            display: block;
        }

        .main-page.hidden {
            display: none;
        }

        .training-page {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 30px;
            padding: 40px;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #ffe5e5;
        }

        .page-title {
            font-size: 36px;
            color: #d63384;
            font-weight: bold;
        }

        .back-btn {
            padding: 12px 30px;
            font-size: 18px;
            font-weight: bold;
            color: #d63384;
            background: white;
            border: 3px solid #d63384;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .back-btn:hover {
            background: #d63384;
            color: white;
            transform: scale(1.05);
        }


        .word-formation {
            text-align: center;
        }

        .word-display {
            font-size: 36px;
            color: #d63384;
            margin: 30px 0;
            font-weight: bold;
        }

        .task-info {
            font-size: 20px;
            color: #666;
            margin-bottom: 30px;
        }

        .input-group {
            margin: 30px 0;
        }

        .answer-input {
            width: 100%;
            padding: 20px;
            font-size: 24px;
            border: 3px solid #d63384;
            border-radius: 15px;
            text-align: center;
            font-family: inherit;
        }

        .answer-input:focus {
            outline: none;
            border-color: #ff6b9d;
        }

        .button-group {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn-primary {
            background: #d63384;
            color: white;
            border-color: #d63384;
        }

        .btn-primary:hover {
            background: #b82a6f;
            border-color: #b82a6f;
        }

        .btn-secondary {
            background: white;
            color: #d63384;
        }

        .result-message {
            margin-top: 30px;
            padding: 20px;
            border-radius: 15px;
            font-size: 24px;
            font-weight: bold;
            display: none;
        }

        .result-message.show {
            display: block;
        }

        .result-message.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .result-message.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .correct-answer {
            margin-top: 15px;
            font-size: 20px;
            color: #666;
        }


        .irregular-verbs {
            text-align: center;
        }

        .verb-base {
            font-size: 48px;
            color: #d63384;
            margin: 30px 0;
            font-weight: bold;
        }

        .drop-zones {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }

        .drop-zone {
            min-height: 150px;
            border: 3px dashed #d63384;
            border-radius: 20px;
            padding: 20px;
            background: #fff5f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .drop-zone.drag-over {
            background: #ffe5e5;
            border-color: #ff6b9d;
            transform: scale(1.02);
        }

        .drop-zone-label {
            font-size: 18px;
            color: #666;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .dropped-word {
            font-size: 24px;
            color: #d63384;
            font-weight: bold;
            padding: 10px 20px;
            background: white;
            border-radius: 10px;
            margin: 5px;
        }

        .word-cards {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 40px 0;
            min-height: 100px;
        }

        .word-card {
            padding: 15px 30px;
            background: linear-gradient(135deg, #ffe5e5 0%, #ffd6e8 100%);
            border: 2px solid #d63384;
            border-radius: 15px;
            font-size: 20px;
            font-weight: bold;
            color: #d63384;
            cursor: move;
            user-select: none;
            transition: all 0.3s;
        }

        .word-card:hover {
            transform: translateY(-3px);
        }

        .word-card.dragging {
            opacity: 0.5;
        }

        .word-card.used {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .drop-zone.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .drop-zone.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }


        @media (max-width: 768px) {
            header {
                padding: 15px 20px;
            }

            .logo {
                font-size: 22px;
            }

            .nav-links {
                gap: 15px;
                font-size: 14px;
            }

            .banner {
                grid-template-columns: 1fr;
                margin: 40px auto;
                padding: 0 20px;
            }

            .banner-content h1 {
                font-size: 28px;
            }

            .banner-illustration {
                font-size: 80px;
            }

            .section {
                padding: 0 20px;
                margin: 40px auto;
            }

            .section-title {
                font-size: 24px;
            }

            .convenience-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .convenience-item {
                gap: 10px;
            }

            .convenience-box {
                font-size: 40px;
            }

            .convenience-text {
                font-size: 14px;
            }

            .training-card {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }

            .modal-content {
                padding: 20px;
                margin: 10px;
            }

            .drop-zones {
                grid-template-columns: 1fr;
            }

            .word-display, .verb-base {
                font-size: 28px;
            }

            .answer-input {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <!-- Main Page -->
    <div id="main-page" class="main-page">
        <!-- Header -->
        <header>
            <nav>
                <div class="logo">INGLISH</div>
                <div class="nav-links">
                    <a href="#" class="nav-link" onclick="openTraining('word-formation')">Словообразование</a>
                    <a href="#" class="nav-link" onclick="openTraining('irregular-verbs')">Неправильные глаголы</a>
                </div>
            </nav>
        </header>

        <!-- Main Banner -->
    <section class="banner">
        <div class="banner-content">
            <h1>Помощник в подготовке к ОГЭ по английскому языку</h1>
        </div>
        <div class="banner-illustration"><img src="title.png" alt="INGLISH"></div>
    </section>

    <!-- About Us -->
    <section class="section">
        <h2 class="section-title">О нас</h2>
        <p class="section-text">
            Inglish — это умный тренажёр для подготовки к экзамену, который доступен вам 24/7. 
            Мы создали платформу, которая помогает эффективно запоминать слова и отрабатывать 
            грамматику в любое время и в любом месте — нужен только телефон или компьютер с интернетом.
        </p>
    </section>

    <!-- Train when convenient -->
    <section class="section">
        <h2 class="section-title">Тренируйся, когда удобно</h2>
        <div class="convenience-grid">
            <div class="convenience-item">
                <div class="convenience-box box-1"><img src="bus.png" alt="В транспорте"></div>
                <div class="convenience-text">В транспорте</div>
            </div>
            <div class="convenience-item">
                <div class="convenience-box box-2"><img src="break.png" alt="На перемене"></div>
                <div class="convenience-text">На перемене</div>
            </div>
            <div class="convenience-item">
                <div class="convenience-box box-3"><img src="home.png" alt="После уроков"></div>
                <div class="convenience-text">После уроков</div>
            </div>
        </div>
    </section>

    <!-- Try now -->
    <section class="section">
        <h2 class="section-title">Попробуй сейчас</h2>
        <div class="training-cards">
            <div class="training-card">
                <div class="card-content">
                    <h3>Словообразование</h3>
                    <p>Одно из самых сложных заданий. Тренируйся составлять новые слова</p>
                </div>
                <button class="btn" onclick="openTraining('word-formation')">Начать</button>
            </div>
            <div class="training-card">
                <div class="card-content">
                    <h3>Неправильные глаголы</h3>
                    <p>Уверен, что помнишь их все?</p>
                </div>
                <button class="btn" onclick="openTraining('irregular-verbs')">Начать</button>
            </div>
        </div>
    </section>
    </div>

    <!-- Word Formation Page -->
    <div id="word-formation-page" class="page">
        <div class="training-page">
            <div class="page-header">
                <h2 class="page-title">Словообразование</h2>
                <button class="back-btn" onclick="goToMainPage()">← Назад</button>
            </div>
            <div class="word-formation">
                <div class="word-display" id="base-word">-</div>
                <div style="font-size: 16px; color: #999; margin-bottom: 15px;" id="base-translation"></div>
                <div class="task-info" id="task-info">Выберите задание</div>
                <div class="input-group">
                    <input type="text" 
                           id="word-answer-input" 
                           class="answer-input" 
                           placeholder="Введите слово..."
                           onkeypress="handleWordFormationKeyPress(event)">
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="checkWordFormation()">Проверить</button>
                    <button class="btn btn-secondary" id="next-word-btn" onclick="nextWordFormation()" style="display: none;">Следующее задание</button>
                </div>
                <div id="word-result" class="result-message"></div>
            </div>
        </div>
    </div>

    <!-- Irregular Verbs Page -->
    <div id="irregular-verbs-page" class="page">
        <div class="training-page">
            <div class="page-header">
                <h2 class="page-title">Неправильные глаголы</h2>
                <button class="back-btn" onclick="goToMainPage()">← Назад</button>
            </div>
            <div class="irregular-verbs">
                <div class="verb-base" id="verb-base">-</div>
                <div class="task-info">Введите формы глагола</div>
                <div class="input-group" style="margin: 30px 0;">
                    <label style="display: block; margin-bottom: 10px; font-size: 16px; color: #666;">Past Simple:</label>
                    <input type="text" 
                           id="past-input" 
                           class="answer-input" 
                           placeholder="Введите форму Past Simple..."
                           onkeypress="handleIrregularVerbKeyPress(event)">
                </div>
                <div class="input-group" style="margin: 30px 0;">
                    <label style="display: block; margin-bottom: 10px; font-size: 16px; color: #666;">Past Participle:</label>
                    <input type="text" 
                           id="participle-input" 
                           class="answer-input" 
                           placeholder="Введите форму Past Participle..."
                           onkeypress="handleIrregularVerbKeyPress(event)">
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="checkIrregularVerbs()">Проверить</button>
                    <button class="btn btn-secondary" id="next-verb-btn" onclick="nextIrregularVerb()" style="display: none;">Следующее задание</button>
                </div>
                <div id="verb-result" class="result-message"></div>
            </div>
        </div>
    </div>

    <script>
        function loadWordFormationData() {
            fetch('words_data.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Файл не найден');
                    }
                    return response.json();
                })
                .then(data => {
                    wordFormationData = data;
                    console.log(`Загружено ${Object.keys(wordFormationData).length} слов для тренировки`);
                })
                .catch(error => {
                    console.warn('Не удалось загрузить words_data.json:', error);
                    wordFormationData = {
                        "accept": {
                            "translation": "принимать",
                            "noun": [{ "word": "acceptance", "translation": "принятие" }],
                            "adjective": [{ "word": "acceptable", "translation": "приемлемый" }],
                            "verb": [],
                            "adverb": []
                        },
                        "accurate": {
                            "translation": "точный",
                            "noun": [],
                            "adjective": [{ "word": "accuracy", "translation": "точность" }],
                            "verb": [],
                            "adverb": [{ "word": "accurately", "translation": "точно" }]
                        }
                    };
                    console.log('Используются резервные данные');
                });
        }

        function parseWordFormationData(text) {
            const data = {};
            if (!text) {
                console.warn('Нет текста для парсинга');
                return data;
            }
            
            const lines = text.split(/\r?\n/);
            
            for (let line of lines) {
                line = line.trim();

                if (!line || line.length <= 2 || /^[A-Z]\s*$/.test(line)) {
                    continue;
                }
                

                let match = line.match(/^-\s*([^:]+):\s*(.+)$/);
                if (!match) {

                    match = line.match(/^([^:]+):\s*(.+)$/);
                }
                
                if (match) {
                    const baseWord = match[1].trim().toLowerCase();
                    const forms = match[2]
                        .split(',')
                        .map(f => f.trim())
                        .filter(f => f.length > 0);
                    
                    if (baseWord && forms.length > 0) {

                        if (data[baseWord]) {
                            data[baseWord] = [...new Set([...data[baseWord], ...forms])];
                        } else {
                            data[baseWord] = forms;
                        }
                    }
                }
            }
            
            console.log('Парсинг завершён. Найдено слов:', Object.keys(data).length);
            return data;
        }



        let wordFormationData = {};
        
        loadWordFormationData();


        const irregularVerbsData = [
            { base: "go", past: "went", participle: "gone" },
            { base: "see", past: "saw", participle: "seen" },
            { base: "take", past: "took", participle: "taken" },
            { base: "come", past: "came", participle: "come" },
            { base: "know", past: "knew", participle: "known" },
            { base: "get", past: "got", participle: "gotten" },
            { base: "give", past: "gave", participle: "given" },
            { base: "find", past: "found", participle: "found" },
            { base: "think", past: "thought", participle: "thought" },
            { base: "tell", past: "told", participle: "told" },
            { base: "become", past: "became", participle: "become" },
            { base: "leave", past: "left", participle: "left" },
            { base: "feel", past: "felt", participle: "felt" },
            { base: "bring", past: "brought", participle: "brought" },
            { base: "begin", past: "began", participle: "begun" },
            { base: "seem", past: "seemed", participle: "seemed" },
            { base: "help", past: "helped", participle: "helped" },
            { base: "talk", past: "talked", participle: "talked" },
            { base: "turn", past: "turned", participle: "turned" },
            { base: "start", past: "started", participle: "started" },
            { base: "show", past: "showed", participle: "shown" },
            { base: "hear", past: "heard", participle: "heard" },
            { base: "let", past: "let", participle: "let" },
            { base: "mean", past: "meant", participle: "meant" },
            { base: "set", past: "set", participle: "set" },
            { base: "meet", past: "met", participle: "met" },
            { base: "run", past: "ran", participle: "run" },
            { base: "pay", past: "paid", participle: "paid" },
            { base: "sit", past: "sat", participle: "sat" },
            { base: "speak", past: "spoke", participle: "spoken" },
            { base: "lie", past: "lay", participle: "lain" },
            { base: "lead", past: "led", participle: "led" },
            { base: "read", past: "read", participle: "read" },
            { base: "allow", past: "allowed", participle: "allowed" },
            { base: "spend", past: "spent", participle: "spent" },
            { base: "produce", past: "produced", participle: "produced" },
            { base: "build", past: "built", participle: "built" },
            { base: "send", past: "sent", participle: "sent" },
            { base: "expect", past: "expected", participle: "expected" },
            { base: "develop", past: "developed", participle: "developed" },
            { base: "choose", past: "chose", participle: "chosen" },
            { base: "seek", past: "sought", participle: "sought" },
            { base: "break", past: "broke", participle: "broken" },
            { base: "spend", past: "spent", participle: "spent" },
            { base: "cut", past: "cut", participle: "cut" },
            { base: "understand", past: "understood", participle: "understood" },
            { base: "draw", past: "drew", participle: "drawn" },
            { base: "write", past: "wrote", participle: "written" },
            { base: "lose", past: "lost", participle: "lost" },
            { base: "win", past: "won", participle: "won" },
            { base: "hold", past: "held", participle: "held" },
            { base: "catch", past: "caught", participle: "caught" },
            { base: "drive", past: "drove", participle: "driven" },
            { base: "eat", past: "ate", participle: "eaten" },
            { base: "fall", past: "fell", participle: "fallen" },
            { base: "forget", past: "forgot", participle: "forgotten" },
            { base: "grow", past: "grew", participle: "grown" },
            { base: "hang", past: "hung", participle: "hung" },
            { base: "have", past: "had", participle: "had" },
            { base: "hide", past: "hid", participle: "hidden" },
            { base: "keep", past: "kept", participle: "kept" },
            { base: "lay", past: "laid", participle: "laid" },
            { base: "ride", past: "rode", participle: "ridden" },
            { base: "ring", past: "rang", participle: "rung" },
            { base: "rise", past: "rose", participle: "risen" },
            { base: "sell", past: "sold", participle: "sold" },
            { base: "sing", past: "sang", participle: "sung" },
            { base: "sleep", past: "slept", participle: "slept" },
            { base: "spread", past: "spread", participle: "spread" },
            { base: "steal", past: "stole", participle: "stolen" },
            { base: "strike", past: "struck", participle: "struck" },
            { base: "swim", past: "swam", participle: "swum" },
            { base: "teach", past: "taught", participle: "taught" },
            { base: "throw", past: "threw", participle: "thrown" },
            { base: "wear", past: "wore", participle: "worn" }
        ];


        let currentWordFormation = null;
        let currentPartOfSpeech = null;
        const partsOfSpeech = {
            "noun": "существительное",
            "adjective": "прилагательное",
            "adverb": "наречие",
            "verb": "глагол"
        };


        let currentVerb = null;


        window.openTraining = function(type) {

            const mainPage = document.getElementById('main-page');
            if (mainPage) {
                mainPage.classList.add('hidden');
            }
            

            const pageId = type + '-page';
            const page = document.getElementById(pageId);
            if (page) {

                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));

                page.classList.add('active');
                

                setTimeout(() => {
                    if (type === 'word-formation') {
                        nextWordFormation();
                    } else if (type === 'irregular-verbs') {
                        nextIrregularVerb();
                    }
                }, 100);
            }
        };


        window.goToMainPage = function() {

            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));

            const mainPage = document.getElementById('main-page');
            if (mainPage) {
                mainPage.classList.remove('hidden');
            }
        };


        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
                if (event.target.id === 'word-formation-modal') {
                    document.getElementById('word-answer-input').value = '';
                    document.getElementById('word-result').classList.remove('show', 'correct', 'incorrect');
                } else if (event.target.id === 'irregular-verbs-modal') {
                    resetIrregularVerbs();
                }
            }
        });




        function detectPartOfSpeech(word) {
            const w = word.toLowerCase();

            if (w.endsWith('ly')) return 'adverb';

            if (w.endsWith('tion') || w.endsWith('sion') || w.endsWith('ment') || 
                w.endsWith('ness') || w.endsWith('ity') || w.endsWith('ance') || 
                w.endsWith('ence') || w.endsWith('ship') || w.endsWith('hood') ||
                w.endsWith('ism') || w.endsWith('ist') || w.endsWith('er') ||
                w.endsWith('or') || w.endsWith('ion')) return 'noun';

            if (w.endsWith('ful') || w.endsWith('less') || w.endsWith('ive') || 
                w.endsWith('al') || w.endsWith('ic') || w.endsWith('ical') ||
                w.endsWith('ous') || w.endsWith('able') || w.endsWith('ible') ||
                w.endsWith('ed') || w.endsWith('ing') || w.endsWith('y')) return 'adjective';

            if (w.endsWith('ed') || w.endsWith('ing') || w.endsWith('ize') ||
                w.endsWith('ise') || w.endsWith('ify') || w.endsWith('en')) return 'verb';

            return 'noun';
        }


        function nextWordFormation() {
            const words = Object.keys(wordFormationData);
            if (words.length === 0) {
                alert('Нет данных для тренировки! Загрузка данных...');
                return;
            }
            currentWordFormation = words[Math.floor(Math.random() * words.length)];
            const wordData = wordFormationData[currentWordFormation];
            
            if (!wordData) {
                console.error('Нет данных для слова:', currentWordFormation);
                return;
            }
            

            const availableParts = ['noun', 'adjective', 'adverb', 'verb']
                .filter(part => wordData[part] && wordData[part].length > 0);
            
            if (availableParts.length === 0) {
                console.error('Нет доступных частей речи для слова:', currentWordFormation);
                return;
            }
            
            currentPartOfSpeech = availableParts[Math.floor(Math.random() * availableParts.length)];
            

            const partForms = wordData[currentPartOfSpeech];
            const randomCorrectAnswer = partForms[Math.floor(Math.random() * partForms.length)];

            document.getElementById('base-word').textContent = currentWordFormation;
            document.getElementById('base-translation').textContent = `(${wordData.translation})`;
            document.getElementById('task-info').textContent = 
                `Образуйте ${partsOfSpeech[currentPartOfSpeech]} от слова "${currentWordFormation}"`;
            document.getElementById('word-answer-input').value = '';
            document.getElementById('word-result').classList.remove('show', 'correct', 'incorrect');
            document.getElementById('word-result').innerHTML = '';

            document.getElementById('next-word-btn').style.display = 'none';
            document.getElementById('word-answer-input').focus();
        }


        function checkWordFormation() {
            const answer = document.getElementById('word-answer-input').value.trim().toLowerCase();
            const resultDiv = document.getElementById('word-result');
            const nextBtn = document.getElementById('next-word-btn');
            
            if (!answer) {
                alert('Пожалуйста, введите ответ');
                return;
            }

            const wordData = wordFormationData[currentWordFormation] || {};
            const correctAnswers = (wordData[currentPartOfSpeech] || []);
            const correctAnswersList = correctAnswers.map(w => w.word ? w.word.toLowerCase() : w.toLowerCase());
            const isCorrect = correctAnswersList.includes(answer);

            resultDiv.classList.remove('correct', 'incorrect');
            resultDiv.classList.add('show', isCorrect ? 'correct' : 'incorrect');
            
            if (isCorrect) {
                resultDiv.innerHTML = ' Верно';
            } else {

                const answersWithTranslations = correctAnswers
                    .map(item => {
                        if (typeof item === 'string') {
                            return item;
                        }
                        return item.word;
                    })
                    .join(', ');
                resultDiv.innerHTML = ` Неверно<br><div class="correct-answer">Правильные варианты (${partsOfSpeech[currentPartOfSpeech]}): ${answersWithTranslations}</div>`;
            }
            

            nextBtn.style.display = 'inline-block';
        }




        function handleWordFormationKeyPress(event) {
            if (event.key === 'Enter') {
                checkWordFormation();
            }
        }




        function nextIrregularVerb() {
            currentVerb = irregularVerbsData[Math.floor(Math.random() * irregularVerbsData.length)];
            document.getElementById('verb-base').textContent = currentVerb.base;
            

            document.getElementById('past-input').value = '';
            document.getElementById('participle-input').value = '';
            

            document.getElementById('verb-result').classList.remove('show', 'correct', 'incorrect');
            document.getElementById('verb-result').innerHTML = '';
            

            document.getElementById('next-verb-btn').style.display = 'none';
            document.getElementById('past-input').focus();
        }



        function checkIrregularVerbs() {
            const pastInput = document.getElementById('past-input').value.trim().toLowerCase();
            const participleInput = document.getElementById('participle-input').value.trim().toLowerCase();
            const resultDiv = document.getElementById('verb-result');
            const nextBtn = document.getElementById('next-verb-btn');
            
            if (!pastInput || !participleInput) {
                alert('Пожалуйста, заполните оба поля');
                return;
            }
            
            const isPastCorrect = pastInput === currentVerb.past.toLowerCase();
            const isParticipleCorrect = participleInput === currentVerb.participle.toLowerCase();
            const isAllCorrect = isPastCorrect && isParticipleCorrect;
            

            resultDiv.classList.remove('correct', 'incorrect');
            resultDiv.classList.add('show', isAllCorrect ? 'correct' : 'incorrect');
            
            if (isAllCorrect) {
                resultDiv.innerHTML = ' Всё верно!';
            } else {
                let message = ' Ошибка<br>';
                if (!isPastCorrect) {
                    message += `<div class="correct-answer">Past Simple: ${currentVerb.past}</div>`;
                }
                if (!isParticipleCorrect) {
                    message += `<div class="correct-answer">Past Participle: ${currentVerb.participle}</div>`;
                }
                resultDiv.innerHTML = message;
            }
            

            nextBtn.style.display = 'inline-block';
        }


        function handleIrregularVerbKeyPress(event) {
            if (event.key === 'Enter') {
                checkIrregularVerbs();
            }
        }


        window.nextWordFormation = nextWordFormation;
        window.checkWordFormation = checkWordFormation;
        window.handleWordFormationKeyPress = handleWordFormationKeyPress;
        window.nextIrregularVerb = nextIrregularVerb;
        window.checkIrregularVerbs = checkIrregularVerbs;
        window.handleIrregularVerbKeyPress = handleIrregularVerbKeyPress;


        document.addEventListener('DOMContentLoaded', function() {
            console.log('Страница загружена');
            console.log('Функции доступны:', {
                openTraining: typeof window.openTraining !== 'undefined',
                goToMainPage: typeof window.goToMainPage !== 'undefined',
                nextWordFormation: typeof window.nextWordFormation !== 'undefined',
                checkWordFormation: typeof window.checkWordFormation !== 'undefined',
                nextIrregularVerb: typeof window.nextIrregularVerb !== 'undefined',
                checkIrregularVerbs: typeof window.checkIrregularVerbs !== 'undefined'
            });
            

            const wordPage = document.getElementById('word-formation-page');
            const verbPage = document.getElementById('irregular-verbs-page');
            console.log('Страницы тренажёров найдены:', {
                wordFormation: !!wordPage,
                irregularVerbs: !!verbPage
            });
            

            setTimeout(() => {
                console.log('Данные загружены:', {
                    wordFormation: Object.keys(wordFormationData).length,
                    irregularVerbs: irregularVerbsData.length
                });
            }, 1000);
            

            const wordFormationButtons = document.querySelectorAll('[onclick*="word-formation"]');
            const irregularVerbsButtons = document.querySelectorAll('[onclick*="irregular-verbs"]');
            
            wordFormationButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    console.log('Кнопка словообразования нажата');
                    if (typeof window.openTraining === 'function') {
                        window.openTraining('word-formation');
                    } else {
                        console.error('Функция openTraining не найдена!');
                        alert('Ошибка: функция не найдена. Проверьте консоль.');
                    }
                });
            });
            
            irregularVerbsButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    console.log('Кнопка неправильных глаголов нажата');
                    if (typeof window.openTraining === 'function') {
                        window.openTraining('irregular-verbs');
                    } else {
                        console.error('Функция openTraining не найдена!');
                        alert('Ошибка: функция не найдена. Проверьте консоль.');
                    }
                });
            });
            
            console.log('Обработчики событий добавлены');
        });
    </script>
</body>
</html>
